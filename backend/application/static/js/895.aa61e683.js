"use strict";(self["webpackChunkhousehold_services"]=self["webpackChunkhousehold_services"]||[]).push([[895],{895:(s,a,t)=>{t.r(a),t.d(a,{default:()=>c});var e=function(){var s=this,a=s._self._c;return a("div",{staticClass:"customer-profile container py-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"card mb-4"},[s._m(0),a("div",{staticClass:"card-body text-center"},[s._m(1),a("h5",[s._v(s._s(s.profile.customer_name||s.profile.username))]),a("p",{staticClass:"text-muted"},[a("i",{staticClass:"fas fa-envelope me-1"}),s._v(" "+s._s(s.profile.email)+" ")]),a("p",{staticClass:"text-muted"},[a("i",{staticClass:"fas fa-phone me-1"}),s._v(" "+s._s(s.profile.phone||"Not provided")+" ")]),s._m(2)])])]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"card"},[s._m(3),a("div",{staticClass:"card-body"},[s.loading?a("div",{staticClass:"text-center py-4"},[s._m(4),a("p",{staticClass:"mt-2"},[s._v("Loading your profile...")])]):s.error?a("div",{staticClass:"alert alert-danger"},[a("i",{staticClass:"fas fa-exclamation-triangle me-2"}),s._v(" "+s._s(s.error)+" ")]):a("form",{on:{submit:function(a){return a.preventDefault(),s.updateProfile.apply(null,arguments)}}},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"customerName"}},[s._v("Full Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.customer_name,expression:"formData.customer_name"}],staticClass:"form-control",attrs:{id:"customerName",type:"text",placeholder:"Your full name",required:""},domProps:{value:s.formData.customer_name},on:{input:function(a){a.target.composing||s.$set(s.formData,"customer_name",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"email"}},[s._v("Email Address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.profile.email,expression:"profile.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",disabled:""},domProps:{value:s.profile.email},on:{input:function(a){a.target.composing||s.$set(s.profile,"email",a.target.value)}}}),a("small",{staticClass:"form-text text-muted"},[s._v("Email address cannot be changed")])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"phone"}},[s._v("Phone Number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.phone,expression:"formData.phone"}],staticClass:"form-control",attrs:{id:"phone",type:"tel",placeholder:"Your phone number",required:""},domProps:{value:s.formData.phone},on:{input:function(a){a.target.composing||s.$set(s.formData,"phone",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"address"}},[s._v("Address")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:s.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{id:"address",placeholder:"Your address",rows:"3",required:""},domProps:{value:s.formData.address},on:{input:function(a){a.target.composing||s.$set(s.formData,"address",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"pinCode"}},[s._v("PIN Code")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.pin_code,expression:"formData.pin_code"}],staticClass:"form-control",attrs:{id:"pinCode",type:"text",placeholder:"Your PIN code",required:""},domProps:{value:s.formData.pin_code},on:{input:function(a){a.target.composing||s.$set(s.formData,"pin_code",a.target.value)}}})]),a("div",{staticClass:"d-grid gap-2 d-md-flex justify-content-md-end"},[a("button",{staticClass:"btn btn-secondary me-md-2",attrs:{type:"button"},on:{click:s.resetForm}},[a("i",{staticClass:"fas fa-undo me-1"}),s._v(" Reset ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.updating}},[a("i",{staticClass:"fas",class:s.updating?"fa-spinner fa-spin":"fa-save"}),s._v(" "+s._s(s.updating?"Saving...":"Save Changes")+" ")])])])])]),a("div",{staticClass:"card mt-4"},[s._m(5),a("div",{staticClass:"card-body"},[a("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[s._m(6),a("button",{staticClass:"btn btn-outline-primary",on:{click:function(a){s.showPasswordModal=!0}}},[a("i",{staticClass:"fas fa-key me-1"}),s._v(" Update Password ")])]),a("hr"),s._m(7)])])])]),s.showPasswordModal?a("div",{staticClass:"modal fade",attrs:{id:"passwordModal",tabindex:"-1","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[s._v("Change Password")]),a("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:function(a){s.showPasswordModal=!1}}})]),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(a){return a.preventDefault(),s.updatePassword.apply(null,arguments)}}},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"currentPassword"}},[s._v("Current Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.passwordData.currentPassword,expression:"passwordData.currentPassword"}],staticClass:"form-control",attrs:{id:"currentPassword",type:"password",required:""},domProps:{value:s.passwordData.currentPassword},on:{input:function(a){a.target.composing||s.$set(s.passwordData,"currentPassword",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"newPassword"}},[s._v("New Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.passwordData.newPassword,expression:"passwordData.newPassword"}],staticClass:"form-control",attrs:{id:"newPassword",type:"password",required:""},domProps:{value:s.passwordData.newPassword},on:{input:function(a){a.target.composing||s.$set(s.passwordData,"newPassword",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label",attrs:{for:"confirmPassword"}},[s._v("Confirm New Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.passwordData.confirmPassword,expression:"passwordData.confirmPassword"}],staticClass:"form-control",attrs:{id:"confirmPassword",type:"password",required:""},domProps:{value:s.passwordData.confirmPassword},on:{input:function(a){a.target.composing||s.$set(s.passwordData,"confirmPassword",a.target.value)}}}),a("div",{staticClass:"invalid-feedback",class:{"d-block":s.passwordError}},[s._v(" "+s._s(s.passwordError)+" ")])]),a("div",{staticClass:"text-end"},[a("button",{staticClass:"btn btn-secondary me-2",attrs:{type:"button"},on:{click:function(a){s.showPasswordModal=!1}}},[s._v(" Cancel ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.updatingPassword}},[s._v(" "+s._s(s.updatingPassword?"Updating...":"Update Password")+" ")])])])])])])]):s._e()])},r=[function(){var s=this,a=s._self._c;return a("div",{staticClass:"card-header bg-primary text-white"},[a("h5",{staticClass:"mb-0"},[s._v("Profile Information")])])},function(){var s=this,a=s._self._c;return a("div",{staticClass:"avatar mb-3"},[a("i",{staticClass:"fas fa-user-circle fa-5x text-primary"})])},function(){var s=this,a=s._self._c;return a("div",{staticClass:"text-center mt-3"},[a("span",{staticClass:"badge bg-success px-3 py-2"},[s._v("Customer")])])},function(){var s=this,a=s._self._c;return a("div",{staticClass:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},[a("h5",{staticClass:"mb-0"},[s._v("Edit Profile")])])},function(){var s=this,a=s._self._c;return a("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[a("span",{staticClass:"visually-hidden"},[s._v("Loading...")])])},function(){var s=this,a=s._self._c;return a("div",{staticClass:"card-header bg-primary text-white"},[a("h5",{staticClass:"mb-0"},[s._v("Account Security")])])},function(){var s=this,a=s._self._c;return a("div",[a("h6",{staticClass:"mb-0"},[s._v("Change Password")]),a("p",{staticClass:"text-muted small mb-0"},[s._v("Update your password regularly for better security")])])},function(){var s=this,a=s._self._c;return a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",[a("h6",{staticClass:"mb-0"},[s._v("Account Status")]),a("p",{staticClass:"text-muted small mb-0"},[s._v("Your account is currently active")])]),a("span",{staticClass:"badge bg-success px-3 py-2"},[s._v("Active")])])}],o=t(194);const i={name:"CustomerProfile",data(){return{profile:{},formData:{customer_name:"",phone:"",address:"",pin_code:""},loading:!0,error:null,updating:!1,showPasswordModal:!1,passwordData:{currentPassword:"",newPassword:"",confirmPassword:""},passwordError:"",updatingPassword:!1}},created(){this.fetchProfile()},methods:{async fetchProfile(){try{this.loading=!0,this.error=null;const s=await o.A.get("http://localhost:8080/api/customer/profile",{headers:{"Authentication-Token":localStorage.getItem("token")}});this.profile=s.data,this.formData={customer_name:this.profile.customer_name||"",phone:this.profile.phone||"",address:this.profile.address||"",pin_code:this.profile.pin_code||""}}catch(s){console.error("Error fetching profile:",s),this.error="Failed to load your profile. Please try again."}finally{this.loading=!1}},resetForm(){this.formData={customer_name:this.profile.customer_name||"",phone:this.profile.phone||"",address:this.profile.address||"",pin_code:this.profile.pin_code||""}},async updateProfile(){try{this.updating=!0,this.error=null;const s=await o.A.put("http://localhost:8080/api/customer/profile",this.formData,{headers:{"Authentication-Token":localStorage.getItem("token")}});this.profile=s.data,alert("Profile updated successfully!")}catch(s){console.error("Error updating profile:",s),this.error="Failed to update your profile. Please try again."}finally{this.updating=!1}},async updatePassword(){if(this.passwordData.newPassword===this.passwordData.confirmPassword)try{this.updatingPassword=!0,this.passwordError="",await o.A.put("http://localhost:8080/api/customer/change-password",{current_password:this.passwordData.currentPassword,new_password:this.passwordData.newPassword},{headers:{"Authentication-Token":localStorage.getItem("token")}}),this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""},this.showPasswordModal=!1,alert("Password updated successfully!")}catch(s){console.error("Error updating password:",s),this.passwordError=s.response?.data?.error||"Failed to update password"}finally{this.updatingPassword=!1}else this.passwordError="New passwords do not match"}}},d=i;var l=t(656),n=(0,l.A)(d,e,r,!1,null,"d6a46110",null);const c=n.exports}}]);