"use strict";(self["webpackChunkhousehold_services"]=self["webpackChunkhousehold_services"]||[]).push([[898],{898:(t,s,a)=>{a.r(s),a.d(s,{default:()=>d});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"admin-profile container py-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"card mb-4"},[t._m(0),s("div",{staticClass:"card-body text-center"},[t._m(1),s("h5",[t._v(t._s(t.profile.username))]),s("p",{staticClass:"text-muted"},[s("i",{staticClass:"fas fa-envelope me-1"}),t._v(" "+t._s(t.profile.email)+" ")]),t._m(2)]),s("div",{staticClass:"card-footer bg-light"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("span",{staticClass:"text-muted"},[t._v("Last Login")]),s("span",[t._v(t._s(t.formatDate(t.profile.last_login_at)))])])])]),s("div",{staticClass:"card mb-4"},[t._m(3),s("div",{staticClass:"card-body"},[s("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[s("span",[t._v("Total Users")]),s("span",{staticClass:"badge bg-info px-3 py-2"},[t._v(t._s(t.stats.totalUsers||0))])]),s("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[s("span",[t._v("Active Services")]),s("span",{staticClass:"badge bg-success px-3 py-2"},[t._v(t._s(t.stats.activeServices||0))])]),s("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[s("span",[t._v("Pending Approvals")]),s("span",{staticClass:"badge bg-warning px-3 py-2"},[t._v(t._s(t.stats.pendingApprovals||0))])]),s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("span",[t._v("Blocked Users")]),s("span",{staticClass:"badge bg-danger px-3 py-2"},[t._v(t._s(t.stats.blockedUsers||0))])])])])]),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"card"},[t._m(4),s("div",{staticClass:"card-body"},[t.loading?s("div",{staticClass:"text-center py-4"},[t._m(5),s("p",{staticClass:"mt-2"},[t._v("Loading your profile...")])]):t.error?s("div",{staticClass:"alert alert-danger"},[s("i",{staticClass:"fas fa-exclamation-triangle me-2"}),t._v(" "+t._s(t.error)+" ")]):s("form",{on:{submit:function(s){return s.preventDefault(),t.updateProfile.apply(null,arguments)}}},[s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"username"}},[t._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"form-control",attrs:{id:"username",type:"text",placeholder:"Your username",required:""},domProps:{value:t.formData.username},on:{input:function(s){s.target.composing||t.$set(t.formData,"username",s.target.value)}}})]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"email"}},[t._v("Email Address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.profile.email,expression:"profile.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",disabled:""},domProps:{value:t.profile.email},on:{input:function(s){s.target.composing||t.$set(t.profile,"email",s.target.value)}}}),s("small",{staticClass:"form-text text-muted"},[t._v("Email address cannot be changed")])]),s("div",{staticClass:"d-grid gap-2 d-md-flex justify-content-md-end"},[s("button",{staticClass:"btn btn-secondary me-md-2",attrs:{type:"button"},on:{click:t.resetForm}},[s("i",{staticClass:"fas fa-undo me-1"}),t._v(" Reset ")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.updating}},[s("i",{staticClass:"fas",class:t.updating?"fa-spinner fa-spin":"fa-save"}),t._v(" "+t._s(t.updating?"Saving...":"Save Changes")+" ")])])])])]),s("div",{staticClass:"card mt-4"},[t._m(6),s("div",{staticClass:"card-body"},[s("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[t._m(7),s("button",{staticClass:"btn btn-outline-primary",on:{click:function(s){t.showPasswordModal=!0}}},[s("i",{staticClass:"fas fa-key me-1"}),t._v(" Change Password ")])]),s("hr"),t._m(8)])]),s("div",{staticClass:"card mt-4"},[t._m(9),s("div",{staticClass:"card-body p-0"},[s("div",{staticClass:"list-group list-group-flush"},[0===t.activities.length?s("div",{staticClass:"text-center py-4"},[s("p",{staticClass:"text-muted mb-0"},[t._v("No recent activity")])]):t._l(t.activities,(function(a,e){return s("div",{key:e,staticClass:"list-group-item"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("div",[s("i",{class:`fas ${t.activityIcons[a.type]} me-2 text-${t.activityColors[a.type]}`}),t._v(" "+t._s(a.description)+" ")]),s("small",{staticClass:"text-muted"},[t._v(t._s(t.formatDate(a.timestamp)))])])])}))],2)])])])]),t.showPasswordModal?s("div",{staticClass:"modal fade",attrs:{id:"passwordModal",tabindex:"-1","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("Change Admin Password")]),s("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:function(s){t.showPasswordModal=!1}}})]),s("div",{staticClass:"modal-body"},[s("form",{on:{submit:function(s){return s.preventDefault(),t.updatePassword.apply(null,arguments)}}},[s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"currentPassword"}},[t._v("Current Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordData.currentPassword,expression:"passwordData.currentPassword"}],staticClass:"form-control",attrs:{id:"currentPassword",type:"password",required:""},domProps:{value:t.passwordData.currentPassword},on:{input:function(s){s.target.composing||t.$set(t.passwordData,"currentPassword",s.target.value)}}})]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"newPassword"}},[t._v("New Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordData.newPassword,expression:"passwordData.newPassword"}],staticClass:"form-control",attrs:{id:"newPassword",type:"password",required:""},domProps:{value:t.passwordData.newPassword},on:{input:function(s){s.target.composing||t.$set(t.passwordData,"newPassword",s.target.value)}}})]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"confirmPassword"}},[t._v("Confirm New Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordData.confirmPassword,expression:"passwordData.confirmPassword"}],staticClass:"form-control",attrs:{id:"confirmPassword",type:"password",required:""},domProps:{value:t.passwordData.confirmPassword},on:{input:function(s){s.target.composing||t.$set(t.passwordData,"confirmPassword",s.target.value)}}}),s("div",{staticClass:"invalid-feedback",class:{"d-block":t.passwordError}},[t._v(" "+t._s(t.passwordError)+" ")])]),s("div",{staticClass:"text-end"},[s("button",{staticClass:"btn btn-secondary me-2",attrs:{type:"button"},on:{click:function(s){t.showPasswordModal=!1}}},[t._v(" Cancel ")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.updatingPassword}},[t._v(" "+t._s(t.updatingPassword?"Updating...":"Update Password")+" ")])])])])])])]):t._e()])},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header bg-primary text-white"},[s("h5",{staticClass:"mb-0"},[t._v("Admin Profile")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"avatar mb-3"},[s("i",{staticClass:"fas fa-user-shield fa-5x text-primary"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"text-center mt-3"},[s("span",{staticClass:"badge bg-danger px-3 py-2"},[t._v("Administrator")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header bg-primary text-white"},[s("h5",{staticClass:"mb-0"},[t._v("Quick Stats")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},[s("h5",{staticClass:"mb-0"},[t._v("Account Settings")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[s("span",{staticClass:"visually-hidden"},[t._v("Loading...")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header bg-primary text-white"},[s("h5",{staticClass:"mb-0"},[t._v("Security")])])},function(){var t=this,s=t._self._c;return s("div",[s("h6",{staticClass:"mb-0"},[t._v("Admin Password")]),s("p",{staticClass:"text-muted small mb-0"},[t._v("Update your password regularly for better security")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("div",[s("h6",{staticClass:"mb-0"},[t._v("Two-Factor Authentication")]),s("p",{staticClass:"text-muted small mb-0"},[t._v("Add an extra layer of security to your account")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"twoFactorToggle",disabled:""}}),s("label",{staticClass:"form-check-label",attrs:{for:"twoFactorToggle"}},[t._v("Coming Soon")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header bg-primary text-white"},[s("h5",{staticClass:"mb-0"},[t._v("Recent Activity")])])}],i=a(194);const o={name:"AdminProfile",data(){return{profile:{},formData:{username:""},stats:{totalUsers:0,activeServices:0,pendingApprovals:0,blockedUsers:0},activities:[],activityIcons:{user:"fa-user",service:"fa-tools",approval:"fa-check-circle",block:"fa-ban",login:"fa-sign-in-alt"},activityColors:{user:"primary",service:"success",approval:"info",block:"danger",login:"warning"},loading:!0,error:null,updating:!1,showPasswordModal:!1,passwordData:{currentPassword:"",newPassword:"",confirmPassword:""},passwordError:"",updatingPassword:!1}},created(){this.fetchProfile(),this.fetchStats(),this.fetchActivities()},methods:{async fetchProfile(){try{this.loading=!0,this.error=null;const t=await i.A.get("http://localhost:8080/api/admin/profile",{headers:{"Authentication-Token":localStorage.getItem("token")}});this.profile=t.data,this.formData={username:this.profile.username||""}}catch(t){console.error("Error fetching profile:",t),this.error="Failed to load your profile. Please try again."}finally{this.loading=!1}},async fetchStats(){try{const t=await i.A.get("http://localhost:8080/api/admin/stats",{headers:{"Authentication-Token":localStorage.getItem("token")}});this.stats=t.data}catch(t){console.error("Error fetching stats:",t)}},async fetchActivities(){try{const t=await i.A.get("http://localhost:8080/api/admin/activities",{headers:{"Authentication-Token":localStorage.getItem("token")}});this.activities=t.data}catch(t){console.error("Error fetching activities:",t),this.activities=[]}},resetForm(){this.formData={username:this.profile.username||""}},async updateProfile(){try{this.updating=!0,this.error=null;const t=await i.A.put("http://localhost:8080/api/admin/profile",this.formData,{headers:{"Authentication-Token":localStorage.getItem("token")}});this.profile=t.data,alert("Profile updated successfully!")}catch(t){console.error("Error updating profile:",t),this.error="Failed to update your profile. Please try again."}finally{this.updating=!1}},async updatePassword(){if(this.passwordData.newPassword===this.passwordData.confirmPassword)try{this.updatingPassword=!0,this.passwordError="",await i.A.put("http://localhost:8080/api/admin/change-password",{current_password:this.passwordData.currentPassword,new_password:this.passwordData.newPassword},{headers:{"Authentication-Token":localStorage.getItem("token")}}),this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""},this.showPasswordModal=!1,alert("Password updated successfully!")}catch(t){console.error("Error updating password:",t),this.passwordError=t.response?.data?.error||"Failed to update password"}finally{this.updatingPassword=!1}else this.passwordError="New passwords do not match"},formatDate(t){if(!t)return"Never";const s=new Date(t);return s.toLocaleString()}}},n=o;var l=a(656),c=(0,l.A)(n,e,r,!1,null,"0a4192b4",null);const d=c.exports}}]);