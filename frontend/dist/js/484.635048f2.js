"use strict";(self["webpackChunkhousehold_services"]=self["webpackChunkhousehold_services"]||[]).push([[484],{484:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"register-container"},[a("div",{staticClass:"container py-5"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8 col-lg-6"},[a("div",{staticClass:"card shadow"},[a("div",{staticClass:"card-body p-4"},[a("h2",{staticClass:"text-center mb-4"},[e._v("Register")]),e.error?a("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):e._e(),a("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(a){return a.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Full Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.name,expression:"formData.name"}],staticClass:"form-control",class:{"is-invalid":e.errors.name},attrs:{type:"text",required:""},domProps:{value:e.formData.name},on:{input:function(a){a.target.composing||e.$set(e.formData,"name",a.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.name))])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.email,expression:"formData.email"}],staticClass:"form-control",class:{"is-invalid":e.errors.email},attrs:{type:"email",required:""},domProps:{value:e.formData.email},on:{input:function(a){a.target.composing||e.$set(e.formData,"email",a.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.email))])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"}],staticClass:"form-control",class:{"is-invalid":e.errors.password},attrs:{type:"password",required:""},domProps:{value:e.formData.password},on:{input:function(a){a.target.composing||e.$set(e.formData,"password",a.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.errors.password))])]),a("div",{staticClass:"mb-4"},[a("label",{staticClass:"form-label"},[e._v("Register as:")]),a("div",{staticClass:"d-flex gap-4"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.role,expression:"formData.role"}],staticClass:"form-check-input",attrs:{type:"radio",value:"customer",id:"roleCustomer"},domProps:{checked:e._q(e.formData.role,"customer")},on:{change:function(a){return e.$set(e.formData,"role","customer")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"roleCustomer"}},[e._v("Customer")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.role,expression:"formData.role"}],staticClass:"form-check-input",attrs:{type:"radio",value:"professional",id:"roleProfessional"},domProps:{checked:e._q(e.formData.role,"professional")},on:{change:function(a){return e.$set(e.formData,"role","professional")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"roleProfessional"}},[e._v("Service Professional")])])])]),"professional"===e.formData.role?a("div",[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Service Type")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.service_type,expression:"formData.service_type"}],staticClass:"form-select",attrs:{required:""},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.formData,"service_type",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:""}},[e._v("Select a service type")]),e._l(e.services,(function(t){return a("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2)]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Experience (years)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.experience,expression:"formData.experience"}],staticClass:"form-control",attrs:{type:"number",min:"0",required:""},domProps:{value:e.formData.experience},on:{input:function(a){a.target.composing||e.$set(e.formData,"experience",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Description")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.description,expression:"formData.description"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:e.formData.description},on:{input:function(a){a.target.composing||e.$set(e.formData,"description",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Upload Documents")]),a("input",{staticClass:"form-control",attrs:{type:"file",multiple:""},on:{change:e.handleFileUpload}})])]):e._e(),"customer"===e.formData.role?a("div",[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Phone")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.phone,expression:"formData.phone"}],staticClass:"form-control",attrs:{type:"tel",required:""},domProps:{value:e.formData.phone},on:{input:function(a){a.target.composing||e.$set(e.formData,"phone",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Address")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.formData.address},on:{input:function(a){a.target.composing||e.$set(e.formData,"address",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("PIN Code")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.pin_code,expression:"formData.pin_code"}],staticClass:"form-control",attrs:{type:"text",required:"",pattern:"[0-9]{6}"},domProps:{value:e.formData.pin_code},on:{input:function(a){a.target.composing||e.$set(e.formData,"pin_code",a.target.value)}}})])]):e._e(),a("div",{staticClass:"d-grid gap-2"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.loading}},[e._v(e._s(e.loading?"Registering...":"Register"))])]),a("p",{staticClass:"text-center mt-3"},[e._v(" Already have an account? "),a("router-link",{attrs:{to:"/login"}},[e._v("Login here")])],1)])])])])])])])},r=[],o=t(648),i=t(194),l=t(997);const n={name:"RegisterView",setup(){const e=(0,o.KR)(!1),a=(0,o.KR)(""),t=(0,o.KR)([]),s=(0,o.Kh)({name:"",email:"",password:"",role:"",service_type:"",experience:"",description:"",phone:"",address:"",pin_code:"",documents:[]}),r=(0,o.Kh)({}),n=async()=>{let e=3;while(e>0)try{const e=await i.A.get("http://localhost:8080/api/service-types",{headers:{Accept:"application/json","Content-Type":"application/json"},withCredentials:!0});t.value=e.data;break}catch(s){console.error("Error fetching services:",s),a.value="Failed to load service types. Please refresh the page.",e--,e>0&&await new Promise((e=>setTimeout(e,1e3)))}},c=e=>{s.documents=Array.from(e.target.files)},m=async()=>{try{if(e.value=!0,a.value="",Object.keys(r).forEach((e=>r[e]="")),s.name||(r.name="Name is required"),s.email||(r.email="Email is required"),s.password||(r.password="Password is required"),s.role||(r.role="Role is required"),"professional"===s.role?(s.service_type||(r.service_type="Service type is required"),s.experience||(r.experience="Experience is required")):"customer"===s.role&&(s.phone||(r.phone="Phone is required"),s.address||(r.address="Address is required"),s.pin_code||(r.pin_code="PIN code is required")),Object.values(r).some((e=>e)))return;const t=new FormData;Object.keys(s).forEach((e=>{"documents"===e?s.documents.forEach((e=>{t.append("documents",e)})):t.append(e,s[e])}));const o=await i.A.post("http://localhost:8080/auth/register",t,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"},withCredentials:!0});console.log("Registration successful:",o.data),a.value="",alert("Registration successful! Please login to continue."),l.A.push("/login")}catch(t){console.error("Registration error:",t),a.value=t.response?.data?.message||t.response?.data?.error||"Registration failed. Please try again."}finally{e.value=!1}};return(0,o.sV)(n),{formData:s,errors:r,loading:e,error:a,services:t,handleSubmit:m,handleFileUpload:c}}},c=n;var m=t(656),d=(0,m.A)(c,s,r,!1,null,"6a52cb5e",null);const p=d.exports}}]);