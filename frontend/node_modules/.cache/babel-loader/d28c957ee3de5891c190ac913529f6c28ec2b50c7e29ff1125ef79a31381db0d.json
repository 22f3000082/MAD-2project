{"ast":null,"code":"import Vue from 'vue';\nimport VueRouter from 'vue-router';\n// import Home from '@/views/HomeView.vue'\n\nVue.use(VueRouter);\nconst routes = [{\n  path: '/',\n  name: 'Home',\n  component: () => import('@/views/HomeView.vue')\n}, {\n  path: '/login',\n  name: 'Login',\n  component: () => import('@/views/LoginView.vue'),\n  meta: {\n    guest: true\n  }\n}, {\n  path: '/register',\n  name: 'Register',\n  component: () => import('@/views/RegisterView.vue'),\n  meta: {\n    guest: true\n  }\n}, {\n  path: '/admin/dashboard',\n  name: 'AdminDashboard',\n  component: () => import('@/views/AdminDashboard.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: '/customer/dashboard',\n  name: 'CustomerDashboard',\n  component: () => import('@/views/CustomerDashboard.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresCustomer: true\n  }\n}, {\n  path: '/professional/dashboard',\n  name: 'ProfessionalDashboard',\n  component: () => import('@/views/ProfessionalDashboard.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresProfessional: true\n  }\n}, {\n  path: '/service-request/:serviceId',\n  name: 'ServiceRequest',\n  component: () => import('@/views/ServiceRequest.vue'),\n  meta: {\n    requiresAuth: true,\n    requiresCustomer: true\n  }\n}];\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n});\n\n// Navigation guard\nrouter.beforeEach((to, from, next) => {\n  const token = localStorage.getItem('token');\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  if (!token && to.meta.requiresAuth) {\n    next(\"/login\"); // Redirect to login if no token\n  } else {\n    next(); // Allow access if token exists\n  }\n\n  // Routes that require authentication\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!token) {\n      next('/login');\n      return;\n    }\n\n    // Check role-specific requirements\n    if (to.meta.requiresAdmin && user.role !== 'admin') {\n      next('/');\n      return;\n    }\n    if (to.meta.requiresCustomer && user.role !== 'customer') {\n      next('/');\n      return;\n    }\n    if (to.meta.requiresProfessional && user.role !== 'professional') {\n      next('/');\n      return;\n    }\n  }\n\n  // // Routes for guests only (login, register)\n  // if (to.matched.some(record => record.meta.guest)) {\n  //   if (token) {\n  //     next(`/${user.role}/dashboard`)\n  //     return\n  //   }\n  // }\n\n  next();\n});\nexport default router;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}