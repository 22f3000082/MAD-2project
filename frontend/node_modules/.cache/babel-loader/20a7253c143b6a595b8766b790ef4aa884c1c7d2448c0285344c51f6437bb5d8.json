{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport { Modal } from 'bootstrap';\nimport Chart from 'chart.js/auto';\nimport { adminAPI } from '@/services/api';\nexport default {\n  name: 'AdminDashboard',\n  setup() {\n    // State\n    const stats = ref({\n      totalUsers: 0,\n      activeServices: 0,\n      pendingApprovals: 0,\n      blockedUsers: 0\n    });\n    const users = ref([]);\n    const services = ref([]);\n    const currentTab = ref('users');\n    const userSearch = ref('');\n    const serviceSearch = ref('');\n    const userTypeFilter = ref('');\n    const serviceForm = ref({\n      name: '',\n      description: '',\n      base_price: '',\n      timeRequired: ''\n    });\n    const editingService = ref(null);\n    const selectedUser = ref(null);\n    const requestsChart = ref(null);\n    const usersChart = ref(null);\n    const loading = ref(false);\n    const error = ref(null);\n    const isDeleting = ref(false);\n    const csvLoading = ref(false);\n    const csvMessage = ref('');\n\n    // Tabs configuration\n    const tabs = [{\n      id: 'users',\n      name: 'Users Management',\n      icon: 'fas fa-users'\n    }, {\n      id: 'services',\n      name: 'Services',\n      icon: 'fas fa-tools'\n    }, {\n      id: 'analytics',\n      name: 'Analytics',\n      icon: 'fas fa-chart-bar'\n    }];\n\n    // Computed properties\n    const pendingApprovals = computed(() => users.value.filter(user => user.role === 'professional' && !user.is_approved));\n    const filteredUsers = computed(() => {\n      return users.value.filter(user => {\n        const matchesSearch = (user.name || '').toLowerCase().includes(userSearch.value.toLowerCase()) || (user.email || '').toLowerCase().includes(userSearch.value.toLowerCase());\n        if (userTypeFilter.value === 'pending') {\n          return matchesSearch && user.role === 'professional' && !user.is_approved;\n        } else {\n          const matchesType = !userTypeFilter.value || user.role === userTypeFilter.value;\n          return matchesSearch && matchesType;\n        }\n      });\n    });\n    const filteredServices = computed(() => {\n      return services.value.filter(service => service.name.toLowerCase().includes(serviceSearch.value.toLowerCase()));\n    });\n\n    // Methods\n\n    const loadDashboardData = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        console.log('Loading dashboard data...');\n        // Debug token information\n        const token = localStorage.getItem('token');\n        if (!token) {\n          throw new Error('No authentication token found. Please login again.');\n        }\n        console.log(`Token exists: ${token.substring(0, 10)}...`);\n\n        // Load users data first - if this fails, we know authentication is an issue\n        const usersData = await adminAPI.getUsers();\n        console.log(`Loaded ${usersData.length} users successfully`);\n        users.value = usersData;\n        try {\n          // Now try to load services with detailed logging\n          console.log('Attempting to load services...');\n          const servicesData = await adminAPI.getServices();\n          console.log('Raw services data:', servicesData);\n          console.log(`Loaded ${servicesData.length} services successfully`);\n          services.value = servicesData;\n        } catch (servicesError) {\n          console.error('Error loading services:', servicesError);\n          error.value = `Failed to load services: ${servicesError.message}`;\n          // Don't fail completely, just show users without services\n          services.value = [];\n        }\n\n        // Update dashboard stats\n        updateStats();\n        loading.value = false;\n      } catch (err) {\n        console.error('Error loading dashboard data:', err);\n        error.value = err.message || 'Failed to load dashboard data. Please try again.';\n        loading.value = false;\n      }\n    };\n    const refreshUsers = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const userData = await adminAPI.getUsers();\n        users.value = userData;\n        updateStats();\n      } catch (error) {\n        console.error('Error refreshing users:', error);\n        error.value = error.message || 'Failed to refresh users';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const downloadCSV = () => {\n      // Show loading indicator and reset message\n      csvLoading.value = true;\n      csvMessage.value = 'Initiating report generation...';\n      console.log('Initiating CSV download...');\n      fetch('/api/export').then(response => response.json()).then(data => {\n        console.log('Received task data:', data);\n        if (data && data.id) {\n          csvMessage.value = 'Report is being generated, please wait...';\n          let attempts = 0;\n          const maxAttempts = 30; // Maximum polling attempts\n\n          // Poll for result readiness\n          const checkResult = () => {\n            attempts++;\n            console.log(`Checking if result is ready: ${data.id} (attempt ${attempts}/${maxAttempts})`);\n            if (attempts > maxAttempts) {\n              csvLoading.value = false;\n              csvMessage.value = 'Report generation timed out. Please try again.';\n              return;\n            }\n\n            // Use XMLHttpRequest instead of fetch for better download handling\n            const xhr = new XMLHttpRequest();\n            xhr.open('GET', `/api/csv_result/${data.id}`, true);\n            xhr.responseType = 'blob'; // Important: set responseType to blob\n\n            xhr.onload = function () {\n              if (this.status === 202) {\n                // Still processing\n                const reader = new FileReader();\n                reader.onload = function () {\n                  try {\n                    const responseData = JSON.parse(reader.result);\n                    csvMessage.value = responseData.message || 'Still generating report...';\n                    console.log('Report still generating, trying again in 2 seconds...');\n                    setTimeout(checkResult, 2000);\n                  } catch (e) {\n                    console.error('Error parsing JSON response:', e);\n                    csvMessage.value = 'Error checking report status';\n                    csvLoading.value = false;\n                  }\n                };\n                reader.readAsText(xhr.response);\n                return;\n              }\n              if (this.status !== 200) {\n                // Error occurred\n                const reader = new FileReader();\n                reader.onload = function () {\n                  try {\n                    const responseData = JSON.parse(reader.result);\n                    csvMessage.value = `Error: ${responseData.error || 'Failed to retrieve report'}`;\n                  } catch (e) {\n                    csvMessage.value = `Error: Failed to retrieve report (status: ${xhr.status})`;\n                  }\n                  csvLoading.value = false;\n                };\n                reader.readAsText(xhr.response);\n                return;\n              }\n\n              // Success - we have our file\n              csvMessage.value = 'Report ready! Downloading...';\n              console.log('Report ready, downloading...');\n\n              // Create a download link\n              const contentDisposition = xhr.getResponseHeader('Content-Disposition');\n              let filename = 'service_report.csv';\n              if (contentDisposition) {\n                const filenameMatch = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);\n                if (filenameMatch && filenameMatch[1]) {\n                  filename = filenameMatch[1].replace(/['\"]/g, '');\n                }\n              }\n              const url = window.URL.createObjectURL(xhr.response);\n              const a = document.createElement('a');\n              a.style.display = 'none';\n              a.href = url;\n              a.download = filename;\n              document.body.appendChild(a);\n              a.click();\n\n              // Clean up\n              window.URL.revokeObjectURL(url);\n              document.body.removeChild(a);\n              setTimeout(() => {\n                csvLoading.value = false;\n                csvMessage.value = 'Report downloaded successfully!';\n                // Clear message after 5 seconds\n                setTimeout(() => {\n                  csvMessage.value = '';\n                }, 5000);\n              }, 1000);\n            };\n            xhr.onerror = function () {\n              e;\n              console.error('XHR error occurred');\n              csvMessage.value = 'Error downloading file. Please try again.';\n              csvLoading.value = false;\n            };\n            xhr.send();\n          };\n\n          // Start polling\n          checkResult();\n        } else {\n          throw new Error('Invalid task ID received');\n        }\n      }).catch(error => {\n        console.error('Error initiating download:', error);\n        csvMessage.value = `Error: ${error.message}`;\n        csvLoading.value = false;\n      });\n    };\n    const updateStats = () => {\n      stats.value = {\n        totalUsers: users.value.length,\n        activeServices: services.value.filter(s => s.is_active !== false).length,\n        pendingApprovals: pendingApprovals.value.length,\n        blockedUsers: users.value.filter(u => u.is_blocked).length\n      };\n    };\n    const showNewServiceModal = () => {\n      editingService.value = null;\n      serviceForm.value = {\n        name: '',\n        description: '',\n        base_price: '',\n        timeRequired: ''\n      };\n      new Modal(document.getElementById('serviceModal')).show();\n    };\n    const editService = service => {\n      editingService.value = service;\n      serviceForm.value = {\n        ...service\n      };\n      new Modal(document.getElementById('serviceModal')).show();\n    };\n    const saveService = async () => {\n      try {\n        if (editingService.value) {\n          await adminAPI.update_service(editingService.value.id, serviceForm.value);\n        } else {\n          await adminAPI.createService(serviceForm.value);\n        }\n        await loadDashboardData();\n        new Modal(document.getElementById('serviceModal')).hide();\n      } catch (error) {\n        console.error('Error saving service:', error);\n      }\n    };\n    const handleServiceDelete = async serviceId => {\n      try {\n        const result = await adminAPI.deleteService(serviceId);\n        if (result.wasDeactivated) {\n          this.$toast.info(result.message);\n          // Update the service status in the list instead of removing it\n          const serviceIndex = services.value.findIndex(s => s.id === serviceId);\n          if (serviceIndex !== -1) {\n            services.value[serviceIndex].is_active = false;\n            services.value[serviceIndex].status = 'inactive';\n          }\n        } else {\n          this.$toast.success('Service deleted successfully');\n          // Remove the service from the list\n          services.value = services.value.filter(s => s.id !== serviceId);\n        }\n      } catch (error) {\n        console.error('Failed to delete service:', error);\n        this.$toast.error(error.message || 'Failed to delete service');\n      }\n    };\n    const approveUser = async userId => {\n      try {\n        if (confirm('Are you sure you want to approve this professional?')) {\n          await adminAPI.approveUser(userId);\n          alert('Professional approved successfully');\n          await loadDashboardData();\n        }\n      } catch (error) {\n        console.error('Error approving user:', error);\n        alert('Failed to approve professional: ' + (error.message || 'Unknown error'));\n      }\n    };\n    const toggleUserBlock = async user => {\n      try {\n        if (user.is_blocked) {\n          // Unblock user\n          if (confirm('Are you sure you want to unblock this user?')) {\n            await adminAPI.unblockUser(user.id);\n            alert('User unblocked successfully');\n          }\n        } else {\n          // Block user with reason\n          const reason = prompt('Please enter a reason for blocking this user:', 'Violation of terms of service');\n          if (reason) {\n            await adminAPI.blockUser(user.id, reason);\n            alert('User blocked successfully');\n          }\n        }\n        await loadDashboardData();\n      } catch (error) {\n        console.error('Error toggling user block status:', error);\n        alert('Operation failed: ' + error.message);\n      }\n    };\n    const viewUserDetails = user => {\n      selectedUser.value = user;\n      new Modal(document.getElementById('userDetailsModal')).show();\n    };\n    const initCharts = () => {\n      // Requests Chart\n      const requestsCtx = document.querySelector('#requestsChart');\n      if (requestsCtx) {\n        requestsChart.value = new Chart(requestsCtx, {\n          type: 'bar',\n          data: {\n            labels: ['Pending', 'In Progress', 'Completed', 'Cancelled'],\n            datasets: [{\n              label: 'Service Requests',\n              data: [12, 19, 3, 5],\n              backgroundColor: ['rgba(255, 206, 86, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(75, 192, 192, 0.2)', 'rgba(255, 99, 132, 0.2)'],\n              borderColor: ['rgba(255, 206, 86, 1)', 'rgba(54, 162, 235, 1)', 'rgba(75, 192, 192, 1)', 'rgba(255, 99, 132, 1)'],\n              borderWidth: 1\n            }]\n          }\n        });\n      }\n\n      // Users Chart\n      const usersCtx = document.querySelector('#usersChart');\n      if (usersCtx) {\n        usersChart.value = new Chart(usersCtx, {\n          type: 'line',\n          data: {\n            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],\n            datasets: [{\n              label: 'New Users',\n              data: [65, 59, 80, 81, 56, 55],\n              fill: false,\n              borderColor: 'rgb(75, 192, 192)',\n              tension: 0.1\n            }]\n          }\n        });\n      }\n    };\n\n    // Lifecycle hooks\n    onMounted(() => {\n      console.log('AdminDashboard mounted - loading data...');\n      loadDashboardData();\n      // Initialize charts after a delay to ensure DOM is ready\n      setTimeout(() => {\n        initCharts();\n      }, 1000);\n    });\n    return {\n      stats,\n      users,\n      services,\n      currentTab,\n      tabs,\n      userSearch,\n      serviceSearch,\n      userTypeFilter,\n      serviceForm,\n      editingService,\n      selectedUser,\n      filteredUsers,\n      filteredServices,\n      pendingApprovals,\n      loading,\n      error,\n      isDeleting,\n      csvLoading,\n      csvMessage,\n      showNewServiceModal,\n      editService,\n      saveService,\n      approveUser,\n      toggleUserBlock,\n      viewUserDetails,\n      refreshUsers,\n      loadDashboardData,\n      downloadCSV\n    };\n  },\n  methods: {\n    async handleDeleteService(serviceId) {\n      if (!serviceId || typeof serviceId !== 'number') {\n        console.error('Invalid service ID:', serviceId);\n        return;\n      }\n      if (!confirm('Are you sure you want to delete this service?')) {\n        return;\n      }\n      try {\n        this.isDeleting = true;\n        // Fix the API reference to use the imported adminAPI\n        const result = await adminAPI.deleteService(serviceId);\n        if (result.wasDeactivated) {\n          // Check if $toast exists before using it\n          if (this.$toast) {\n            this.$toast.info(result.message || 'Service was deactivated');\n          } else {\n            alert(result.message || 'Service was deactivated');\n          }\n\n          // Update the service status in the list instead of removing it\n          const serviceIndex = this.services.findIndex(s => s.id === serviceId);\n          if (serviceIndex !== -1) {\n            this.services[serviceIndex].is_active = false;\n            this.services[serviceIndex].status = 'inactive';\n          }\n        } else {\n          // Remove service from list\n          this.services = this.services.filter(s => s.id !== serviceId);\n\n          // Check if $toast exists before using it\n          if (this.$toast) {\n            this.$toast.success(result.message || 'Service deleted successfully');\n          } else {\n            alert(result.message || 'Service deleted successfully');\n          }\n        }\n      } catch (error) {\n        console.error('Delete failed:', error);\n        // Check if $toast exists before using it\n        if (this.$toast) {\n          this.$toast.error(error.message || 'Failed to delete service');\n        } else {\n          alert(error.message || 'Failed to delete service');\n        }\n      } finally {\n        this.isDeleting = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","Modal","Chart","adminAPI","name","setup","stats","totalUsers","activeServices","pendingApprovals","blockedUsers","users","services","currentTab","userSearch","serviceSearch","userTypeFilter","serviceForm","description","base_price","timeRequired","editingService","selectedUser","requestsChart","usersChart","loading","error","isDeleting","csvLoading","csvMessage","tabs","id","icon","value","filter","user","role","is_approved","filteredUsers","matchesSearch","toLowerCase","includes","email","matchesType","filteredServices","service","loadDashboardData","console","log","token","localStorage","getItem","Error","substring","usersData","getUsers","length","servicesData","getServices","servicesError","message","updateStats","err","refreshUsers","userData","downloadCSV","fetch","then","response","json","data","attempts","maxAttempts","checkResult","xhr","XMLHttpRequest","open","responseType","onload","status","reader","FileReader","responseData","JSON","parse","result","setTimeout","e","readAsText","contentDisposition","getResponseHeader","filename","filenameMatch","match","replace","url","window","URL","createObjectURL","a","document","createElement","style","display","href","download","body","appendChild","click","revokeObjectURL","removeChild","onerror","send","catch","s","is_active","u","is_blocked","showNewServiceModal","getElementById","show","editService","saveService","update_service","createService","hide","handleServiceDelete","serviceId","deleteService","wasDeactivated","$toast","info","serviceIndex","findIndex","success","approveUser","userId","confirm","alert","toggleUserBlock","unblockUser","reason","prompt","blockUser","viewUserDetails","initCharts","requestsCtx","querySelector","type","labels","datasets","label","backgroundColor","borderColor","borderWidth","usersCtx","fill","tension","methods","handleDeleteService"],"sources":["src/views/AdminDashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-dashboard\">\r\n    <!-- Top Stats Cards -->\r\n    <div class=\"container-fluid py-4\">\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"text-center my-5\">\r\n        <div class=\"spinner-border text-primary\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n        <p class=\"mt-2\">Loading dashboard data...</p>\r\n      </div>\r\n\r\n      <!-- Error State -->\r\n      <div v-else-if=\"error\" class=\"alert alert-danger\">\r\n        <i class=\"fas fa-exclamation-triangle me-2\"></i>\r\n        {{ error }}\r\n        <button class=\"btn btn-outline-danger btn-sm ms-3\" @click=\"loadDashboardData\">\r\n          <i class=\"fas fa-sync-alt\"></i> Retry\r\n        </button>\r\n      </div>\r\n\r\n      <div v-else>\r\n        <div class=\"row g-4 mb-4\">\r\n          <div class=\"col-xl-3 col-sm-6\">\r\n            <div class=\"card bg-primary text-white\">\r\n              <div class=\"card-body\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div>\r\n                    <h6 class=\"card-title mb-0\">Total Users</h6>\r\n                    <h2 class=\"mt-2 mb-0\">{{ stats.totalUsers }}</h2>\r\n                  </div>\r\n                  <div class=\"icon-shape bg-white text-primary rounded-circle\">\r\n                    <i class=\"fas fa-users fa-2x\"></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-xl-3 col-sm-6\">\r\n            <div class=\"card bg-success text-white\">\r\n              <div class=\"card-body\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div>\r\n                    <h6 class=\"card-title mb-0\">Active Services</h6>\r\n                    <h2 class=\"mt-2 mb-0\">{{ stats.activeServices }}</h2>\r\n                  </div>\r\n                  <div class=\"icon-shape bg-white text-success rounded-circle\">\r\n                    <i class=\"fas fa-tools fa-2x\"></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-xl-3 col-sm-6\">\r\n            <div class=\"card bg-warning text-white\">\r\n              <div class=\"card-body\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div>\r\n                    <h6 class=\"card-title mb-0\">Pending Approvals</h6>\r\n                    <h2 class=\"mt-2 mb-0\">{{ stats.pendingApprovals }}</h2>\r\n                  </div>\r\n                  <div class=\"icon-shape bg-white text-warning rounded-circle\">\r\n                    <i class=\"fas fa-clock fa-2x\"></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-xl-3 col-sm-6\">\r\n            <div class=\"card bg-danger text-white\">\r\n              <div class=\"card-body\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div>\r\n                    <h6 class=\"card-title mb-0\">Blocked Users</h6>\r\n                    <h2 class=\"mt-2 mb-0\">{{ stats.blockedUsers }}</h2>\r\n                  </div>\r\n                  <div class=\"icon-shape bg-white text-danger rounded-circle\">\r\n                    <i class=\"fas fa-ban fa-2x\"></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Main Content Tabs -->\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <ul class=\"nav nav-tabs card-header-tabs\">\r\n              <li class=\"nav-item\" v-for=\"tab in tabs\" :key=\"tab.id\">\r\n                <a class=\"nav-link\" :class=\"{ active: currentTab === tab.id }\" \r\n                   @click=\"currentTab = tab.id\" href=\"#\">\r\n                  <i :class=\"tab.icon\"></i> {{ tab.name }}\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <!-- Users Management Tab -->\r\n            <div v-if=\"currentTab === 'users'\" class=\"users-management\">\r\n              <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <div class=\"d-flex gap-2\">\r\n                  <input id=\"userSearchInput\" name=\"userSearch\" v-model=\"userSearch\" type=\"text\" class=\"form-control\" \r\n                         placeholder=\"Search users...\">\r\n                  <select id=\"userTypeFilter\" name=\"userTypeFilter\" v-model=\"userTypeFilter\" class=\"form-select\">\r\n                    <option value=\"\">All Users</option>\r\n                    <option value=\"professional\">Professionals</option>\r\n                    <option value=\"customer\">Customers</option>\r\n                    <option value=\"pending\">Pending Approval</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"d-flex gap-2\">\r\n                  <button class=\"btn btn-outline-primary\" @click=\"refreshUsers\">\r\n                    <i class=\"fas fa-sync-alt\"></i> Refresh\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"pendingApprovals.length > 0\" class=\"alert alert-warning mb-4\">\r\n                <i class=\"fas fa-exclamation-triangle me-2\"></i>\r\n                <strong>{{ pendingApprovals.length }} professional{{ pendingApprovals.length > 1 ? 's' : '' }}</strong> pending approval\r\n              </div>\r\n\r\n              <div class=\"table-responsive\">\r\n                <table class=\"table table-hover\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>ID</th>\r\n                      <th>Name</th>\r\n                      <th>Email</th>\r\n                      <th>Role</th>\r\n                      <th>Status</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"user in filteredUsers\" :key=\"user.id\" \r\n                        :class=\"{'table-warning': user.role === 'professional' && !user.is_approved}\">\r\n                      <td>{{ user.id }}</td>\r\n                      <td>{{ user.name }}</td>\r\n                      <td>{{ user.email }}</td>\r\n                      <td>\r\n                        <span class=\"badge\" \r\n                              :class=\"user.role === 'professional' ? 'bg-info' : 'bg-secondary'\">\r\n                          {{ user.role }}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <span v-if=\"user.role === 'professional' && !user.is_approved\" \r\n                              class=\"badge bg-warning\">Pending Approval</span>\r\n                        <span v-else class=\"badge\" \r\n                              :class=\"user.is_blocked ? 'bg-danger' : 'bg-success'\">\r\n                          {{ user.is_blocked ? 'Blocked' : 'Active' }}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <div class=\"btn-group\">\r\n                          <button v-if=\"user.role === 'professional' && !user.is_approved\"\r\n                                  class=\"btn btn-sm btn-success\" \r\n                                  @click=\"approveUser(user.id)\">\r\n                            <i class=\"fas fa-check\"></i> Approve\r\n                          </button>\r\n                          <button class=\"btn btn-sm\" \r\n                                  :class=\"user.is_blocked ? 'btn-success' : 'btn-danger'\"\r\n                                  @click=\"toggleUserBlock(user)\">\r\n                            <i class=\"fas\" :class=\"user.is_blocked ? 'fa-unlock' : 'fa-ban'\"></i>\r\n                            {{ user.is_blocked ? 'Unblock' : 'Block' }}\r\n                          </button>\r\n                          <button class=\"btn btn-sm btn-info\" @click=\"viewUserDetails(user)\">\r\n                            <i class=\"fas fa-eye\"></i> View\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Services Management Tab -->\r\n            <div v-if=\"currentTab === 'services'\" class=\"services-management\">\r\n              <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n                <div class=\"d-flex gap-2\">\r\n                  <input id=\"serviceSearchInput\" name=\"serviceSearch\" v-model=\"serviceSearch\" type=\"text\" class=\"form-control\" \r\n                         placeholder=\"Search services...\">\r\n                </div>\r\n                <button class=\"btn btn-primary\" @click=\"showNewServiceModal\">\r\n                  <i class=\"fas fa-plus\"></i> New Service\r\n                </button>\r\n              </div>\r\n\r\n              <div class=\"table-responsive\">\r\n                <table class=\"table table-hover\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>ID</th>\r\n                      <th>Name</th>\r\n                      <th>Base Price</th>\r\n                      <th>Time Required</th>\r\n                      <th>Status</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"service in filteredServices\" :key=\"service.id\">\r\n                      <td>{{ service.id }}</td>\r\n                      <td>{{ service.name }}</td>\r\n                      <td>₹{{ service.base_price }}</td>\r\n                      <td>{{ service.timeRequired }}</td>\r\n                      <td>\r\n                        <span class=\"badge\" \r\n                              :class=\"service.status === 'active' ? 'bg-success' : 'bg-danger'\">\r\n                          {{ service.status }}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <div class=\"btn-group\">\r\n                          <button class=\"btn btn-sm btn-warning\" @click=\"editService(service)\">\r\n                            <i class=\"fas fa-edit\"></i> Edit\r\n                          </button>\r\n                          <button \r\n                            @click=\"handleDeleteService(service.id)\"\r\n                            class=\"btn btn-sm btn-danger\"\r\n                            :disabled=\"isDeleting\">\r\n                            <i class=\"fas fa-trash\"></i> Delete\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Analytics Tab -->\r\n            <div v-if=\"currentTab === 'analytics'\" class=\"analytics\">\r\n              <div class=\"row border\">\r\n                <div class=\"text-end\">\r\n                  <button \r\n                    @click=\"downloadCSV\" \r\n                    class=\"btn btn-sm btn-primary\"\r\n                    :disabled=\"csvLoading\">\r\n                    <span v-if=\"csvLoading\" class=\"spinner-border spinner-border-sm me-1\" role=\"status\" aria-hidden=\"true\"></span>\r\n                    {{ csvLoading ? 'Generating Report...' : 'Download CSV' }}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div v-if=\"csvMessage\" class=\"alert alert-info mt-2\">\r\n                {{ csvMessage }}\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                      <h5 class=\"card-title\">Service Requests by Status</h5>\r\n                      <canvas ref=\"requestsChart\"></canvas>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"card\">\r\n                    <div class=\"card-body\">\r\n                      <h5 class=\"card-title\">User Registration Trend</h5>\r\n                      <canvas ref=\"usersChart\"></canvas>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n\r\n    <!-- New/Edit Service Modal -->\r\n    <div class=\"modal fade\" id=\"serviceModal\" tabindex=\"-1\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">{{ editingService ? 'Edit' : 'New' }} Service</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"saveService\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"serviceName\" class=\"form-label\">Service Name</label>\r\n                <input id=\"serviceName\" name=\"serviceName\" v-model=\"serviceForm.name\" type=\"text\" class=\"form-control\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"serviceDescription\" class=\"form-label\">Description</label>\r\n                <textarea id=\"serviceDescription\" name=\"serviceDescription\" v-model=\"serviceForm.description\" class=\"form-control\" rows=\"3\" required></textarea>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"serviceBasePrice\" class=\"form-label\">Base Price (₹)</label>\r\n                <input id=\"serviceBasePrice\" name=\"serviceBasePrice\" v-model=\"serviceForm.base_price\" type=\"number\" class=\"form-control\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"serviceTimeRequired\" class=\"form-label\">Time Required (hours)</label>\r\n                <input id=\"serviceTimeRequired\" name=\"serviceTimeRequired\" v-model=\"serviceForm.timeRequired\" type=\"number\" class=\"form-control\" required>\r\n              </div>\r\n              <div class=\"text-end\">\r\n                <button type=\"button\" class=\"btn btn-secondary me-2\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\" \r\n                @click.prevent=\"saveService\" >Save</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- User Details Modal -->\r\n    <div class=\"modal fade\" id=\"userDetailsModal\" tabindex=\"-1\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">User Details</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n          </div>\r\n          <div class=\"modal-body\" v-if=\"selectedUser\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6\">\r\n                <h6>Basic Information</h6>\r\n                <table class=\"table\">\r\n                  <tr>\r\n                    <th>Name:</th>\r\n                    <td>{{ selectedUser.name }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Email:</th>\r\n                    <td>{{ selectedUser.email }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Role:</th>\r\n                    <td>{{ selectedUser.role }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Status:</th>\r\n                    <td>{{ selectedUser.status }}</td>\r\n                  </tr>\r\n                </table>\r\n              </div>\r\n              <div class=\"col-md-6\" v-if=\"selectedUser.role === 'professional'\">\r\n                <h6>Professional Details</h6>\r\n                <table class=\"table\">\r\n                  <tr>\r\n                    <th>Service Type:</th>\r\n                    <td>{{ selectedUser.serviceType }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Experience:</th>\r\n                    <td>{{ selectedUser.experience }} years</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Rating:</th>\r\n                    <td>\r\n                      <div class=\"stars\">\r\n                        <i v-for=\"n in 5\" :key=\"n\"\r\n                           class=\"fas fa-star\"\r\n                           :class=\"n <= selectedUser.rating ? 'text-warning' : 'text-muted'\"></i>\r\n                        ({{ selectedUser.rating }}/5)\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <div class=\"mt-4\" v-if=\"selectedUser.role === 'professional'\">\r\n              <h6>Recent Reviews</h6>\r\n              <div class=\"reviews-list\">\r\n                <div v-for=\"review in selectedUser.reviews\" :key=\"review.id\" class=\"review-item\">\r\n                  <div class=\"stars mb-1\">\r\n                    <i v-for=\"n in 5\" :key=\"n\"\r\n                       class=\"fas fa-star\"\r\n                       :class=\"n <= review.rating ? 'text-warning' : 'text-muted'\"></i>\r\n                  </div>\r\n                  <p class=\"mb-1\">{{ review.comment }}</p>\r\n                  <small class=\"text-muted\">{{ review.date }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport { Modal } from 'bootstrap'\r\nimport Chart from 'chart.js/auto'\r\nimport { adminAPI } from '@/services/api'\r\n\r\nexport default {\r\n  name: 'AdminDashboard',\r\n  setup() {\r\n    // State\r\n    const stats = ref({\r\n      totalUsers: 0,\r\n      activeServices: 0,\r\n      pendingApprovals: 0,\r\n      blockedUsers: 0\r\n    })\r\n    const users = ref([])\r\n    const services = ref([])\r\n    const currentTab = ref('users')\r\n    const userSearch = ref('')\r\n    const serviceSearch = ref('')\r\n    const userTypeFilter = ref('')\r\n    const serviceForm = ref({\r\n      name: '',\r\n      description: '',\r\n      base_price: '',\r\n      timeRequired: ''\r\n    })\r\n    const editingService = ref(null)\r\n    const selectedUser = ref(null)\r\n    const requestsChart = ref(null)\r\n    const usersChart = ref(null)\r\n    const loading = ref(false)\r\n    const error = ref(null)\r\n    const isDeleting = ref(false)\r\n    const csvLoading = ref(false)\r\n    const csvMessage = ref('')\r\n\r\n    // Tabs configuration\r\n    const tabs = [\r\n      { id: 'users', name: 'Users Management', icon: 'fas fa-users' },\r\n      { id: 'services', name: 'Services', icon: 'fas fa-tools' },\r\n      { id: 'analytics', name: 'Analytics', icon: 'fas fa-chart-bar' }\r\n    ]\r\n\r\n    // Computed properties\r\n    const pendingApprovals = computed(() => \r\n      users.value.filter(user => user.role === 'professional' && !user.is_approved)\r\n    );\r\n\r\n    const filteredUsers = computed(() => {\r\n      return users.value.filter(user => {\r\n        const matchesSearch = (user.name || '').toLowerCase().includes(userSearch.value.toLowerCase()) ||\r\n                             (user.email || '').toLowerCase().includes(userSearch.value.toLowerCase());\r\n        \r\n        if (userTypeFilter.value === 'pending') {\r\n          return matchesSearch && user.role === 'professional' && !user.is_approved;\r\n        } else {\r\n          const matchesType = !userTypeFilter.value || user.role === userTypeFilter.value;\r\n          return matchesSearch && matchesType;\r\n        }\r\n      });\r\n    });\r\n\r\n    const filteredServices = computed(() => {\r\n      return services.value.filter(service =>\r\n        service.name.toLowerCase().includes(serviceSearch.value.toLowerCase())\r\n      )\r\n    })\r\n\r\n    // Methods\r\n\r\n    \r\n    const loadDashboardData = async () => {\r\n      loading.value = true;\r\n      error.value = null;\r\n      try {\r\n        console.log('Loading dashboard data...');\r\n        // Debug token information\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n          throw new Error('No authentication token found. Please login again.');\r\n        }\r\n        console.log(`Token exists: ${token.substring(0, 10)}...`);\r\n        \r\n        // Load users data first - if this fails, we know authentication is an issue\r\n        const usersData = await adminAPI.getUsers();\r\n        console.log(`Loaded ${usersData.length} users successfully`);\r\n        users.value = usersData;\r\n\r\n        try {\r\n          // Now try to load services with detailed logging\r\n          console.log('Attempting to load services...');\r\n          const servicesData = await adminAPI.getServices();\r\n          console.log('Raw services data:', servicesData);\r\n          console.log(`Loaded ${servicesData.length} services successfully`);\r\n          services.value = servicesData;\r\n        } catch (servicesError) {\r\n          console.error('Error loading services:', servicesError);\r\n          error.value = `Failed to load services: ${servicesError.message}`;\r\n          // Don't fail completely, just show users without services\r\n          services.value = [];\r\n        }\r\n\r\n        // Update dashboard stats\r\n        updateStats();\r\n        loading.value = false;\r\n      } catch (err) {\r\n        console.error('Error loading dashboard data:', err);\r\n        error.value = err.message || 'Failed to load dashboard data. Please try again.';\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    const refreshUsers = async () => {\r\n      loading.value = true;\r\n      error.value = null;\r\n      try {\r\n        const userData = await adminAPI.getUsers();\r\n        users.value = userData;\r\n        updateStats();\r\n      } catch (error) {\r\n        console.error('Error refreshing users:', error);\r\n        error.value = error.message || 'Failed to refresh users';\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    const downloadCSV = () => {\r\n      // Show loading indicator and reset message\r\n      csvLoading.value = true;\r\n      csvMessage.value = 'Initiating report generation...';\r\n      console.log('Initiating CSV download...');\r\n      \r\n      fetch('/api/export')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          console.log('Received task data:', data);\r\n          if (data && data.id) {\r\n            csvMessage.value = 'Report is being generated, please wait...';\r\n            \r\n            let attempts = 0;\r\n            const maxAttempts = 30; // Maximum polling attempts\r\n            \r\n            // Poll for result readiness\r\n            const checkResult = () => {\r\n              attempts++;\r\n              console.log(`Checking if result is ready: ${data.id} (attempt ${attempts}/${maxAttempts})`);\r\n              \r\n              if (attempts > maxAttempts) {\r\n                csvLoading.value = false;\r\n                csvMessage.value = 'Report generation timed out. Please try again.';\r\n                return;\r\n              }\r\n              \r\n              // Use XMLHttpRequest instead of fetch for better download handling\r\n              const xhr = new XMLHttpRequest();\r\n              xhr.open('GET', `/api/csv_result/${data.id}`, true);\r\n              xhr.responseType = 'blob'; // Important: set responseType to blob\r\n              \r\n              xhr.onload = function() {\r\n                if (this.status === 202) {\r\n                  // Still processing\r\n                  const reader = new FileReader();\r\n                  reader.onload = function() {\r\n                    try {\r\n                      const responseData = JSON.parse(reader.result);\r\n                      csvMessage.value = responseData.message || 'Still generating report...';\r\n                      console.log('Report still generating, trying again in 2 seconds...');\r\n                      setTimeout(checkResult, 2000);\r\n                    } catch (e) {\r\n                      console.error('Error parsing JSON response:', e);\r\n                      csvMessage.value = 'Error checking report status';\r\n                      csvLoading.value = false;\r\n                    }\r\n                  };\r\n                  reader.readAsText(xhr.response);\r\n                  return;\r\n                }\r\n                \r\n                if (this.status !== 200) {\r\n                  // Error occurred\r\n                  const reader = new FileReader();\r\n                  reader.onload = function() {\r\n                    try {\r\n                      const responseData = JSON.parse(reader.result);\r\n                      csvMessage.value = `Error: ${responseData.error || 'Failed to retrieve report'}`;\r\n                    } catch (e) {\r\n                      csvMessage.value = `Error: Failed to retrieve report (status: ${xhr.status})`;\r\n                    }\r\n                    csvLoading.value = false;\r\n                  };\r\n                  reader.readAsText(xhr.response);\r\n                  return;\r\n                }\r\n                \r\n                // Success - we have our file\r\n                csvMessage.value = 'Report ready! Downloading...';\r\n                console.log('Report ready, downloading...');\r\n                \r\n                // Create a download link\r\n                const contentDisposition = xhr.getResponseHeader('Content-Disposition');\r\n                let filename = 'service_report.csv';\r\n                \r\n                if (contentDisposition) {\r\n                  const filenameMatch = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);\r\n                  if (filenameMatch && filenameMatch[1]) {\r\n                    filename = filenameMatch[1].replace(/['\"]/g, '');\r\n                  }\r\n                }\r\n                \r\n                const url = window.URL.createObjectURL(xhr.response);\r\n                const a = document.createElement('a');\r\n                a.style.display = 'none';\r\n                a.href = url;\r\n                a.download = filename;\r\n                document.body.appendChild(a);\r\n                a.click();\r\n                \r\n                // Clean up\r\n                window.URL.revokeObjectURL(url);\r\n                document.body.removeChild(a);\r\n                \r\n                setTimeout(() => {\r\n                  csvLoading.value = false;\r\n                  csvMessage.value = 'Report downloaded successfully!';\r\n                  // Clear message after 5 seconds\r\n                  setTimeout(() => {\r\n                    csvMessage.value = '';\r\n                  }, 5000);\r\n                }, 1000);\r\n              };\r\n              \r\n              xhr.onerror = function() {e\r\n                console.error('XHR error occurred');\r\n                csvMessage.value = 'Error downloading file. Please try again.';\r\n                csvLoading.value = false;\r\n              };\r\n              \r\n              xhr.send();\r\n            };\r\n            \r\n            // Start polling\r\n            checkResult();\r\n          } else {\r\n            throw new Error('Invalid task ID received');\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Error initiating download:', error);\r\n          csvMessage.value = `Error: ${error.message}`;\r\n          csvLoading.value = false;\r\n        });\r\n    };\r\n\r\n    const updateStats = () => {\r\n      stats.value = {\r\n        totalUsers: users.value.length,\r\n        activeServices: services.value.filter(s => s.is_active !== false).length,\r\n        pendingApprovals: pendingApprovals.value.length,\r\n        blockedUsers: users.value.filter(u => u.is_blocked).length\r\n      }\r\n    }\r\n\r\n    const showNewServiceModal = () => {\r\n      editingService.value = null\r\n      serviceForm.value = {\r\n        name: '',\r\n        description: '',\r\n        base_price: '',\r\n        timeRequired: ''\r\n      }\r\n      new Modal(document.getElementById('serviceModal')).show()\r\n    }\r\n\r\n    const editService = (service) => {\r\n      editingService.value = service\r\n      serviceForm.value = { ...service }\r\n      new Modal(document.getElementById('serviceModal')).show()\r\n    }\r\n\r\n    const saveService = async () => {\r\n      try {\r\n\r\n        if (editingService.value) {\r\n          await adminAPI.update_service(editingService.value.id, serviceForm.value)\r\n        } else {\r\n          await adminAPI.createService(serviceForm.value)\r\n        }\r\n        await loadDashboardData()\r\n        new Modal(document.getElementById('serviceModal')).hide()\r\n      } catch (error) {\r\n        console.error('Error saving service:', error)\r\n      }\r\n    }\r\n\r\n    const handleServiceDelete = async (serviceId) => {\r\n      try {\r\n          const result = await adminAPI.deleteService(serviceId);\r\n          \r\n          if (result.wasDeactivated) {\r\n              this.$toast.info(result.message);\r\n              // Update the service status in the list instead of removing it\r\n              const serviceIndex = services.value.findIndex(s => s.id === serviceId);\r\n              if (serviceIndex !== -1) {\r\n                  services.value[serviceIndex].is_active = false;\r\n                  services.value[serviceIndex].status = 'inactive';\r\n              }\r\n          } else {\r\n              this.$toast.success('Service deleted successfully');\r\n              // Remove the service from the list\r\n              services.value = services.value.filter(s => s.id !== serviceId);\r\n          }\r\n      } catch (error) {\r\n          console.error('Failed to delete service:', error);\r\n          this.$toast.error(error.message || 'Failed to delete service');\r\n      }\r\n    }\r\n\r\n    const approveUser = async (userId) => {\r\n      try {\r\n        if (confirm('Are you sure you want to approve this professional?')) {\r\n          await adminAPI.approveUser(userId);\r\n          alert('Professional approved successfully');\r\n          await loadDashboardData();\r\n        }\r\n      } catch (error) {\r\n        console.error('Error approving user:', error);\r\n        alert('Failed to approve professional: ' + (error.message || 'Unknown error'));\r\n      }\r\n    };\r\n\r\n    \r\n\r\n    const toggleUserBlock = async (user) => {\r\n      try {\r\n        if (user.is_blocked) {\r\n          // Unblock user\r\n          if (confirm('Are you sure you want to unblock this user?')) {\r\n            await adminAPI.unblockUser(user.id);\r\n            alert('User unblocked successfully');\r\n          }\r\n        } else {\r\n          // Block user with reason\r\n          const reason = prompt('Please enter a reason for blocking this user:', 'Violation of terms of service');\r\n          if (reason) {\r\n            await adminAPI.blockUser(user.id, reason);\r\n            alert('User blocked successfully');\r\n          }\r\n        }\r\n        await loadDashboardData();\r\n      } catch (error) {\r\n        console.error('Error toggling user block status:', error);\r\n        alert('Operation failed: ' + error.message);\r\n      }\r\n    };\r\n\r\n    const viewUserDetails = (user) => {\r\n      selectedUser.value = user\r\n      new Modal(document.getElementById('userDetailsModal')).show()\r\n    }\r\n\r\n    const initCharts = () => {\r\n      // Requests Chart\r\n      const requestsCtx = document.querySelector('#requestsChart')\r\n      if (requestsCtx) {\r\n        requestsChart.value = new Chart(requestsCtx, {\r\n          type: 'bar',\r\n          data: {\r\n            labels: ['Pending', 'In Progress', 'Completed', 'Cancelled'],\r\n            datasets: [{\r\n              label: 'Service Requests',\r\n              data: [12, 19, 3, 5],\r\n              backgroundColor: [\r\n                'rgba(255, 206, 86, 0.2)',\r\n                'rgba(54, 162, 235, 0.2)',\r\n                'rgba(75, 192, 192, 0.2)',\r\n                'rgba(255, 99, 132, 0.2)'\r\n              ],\r\n              borderColor: [\r\n                'rgba(255, 206, 86, 1)',\r\n                'rgba(54, 162, 235, 1)',\r\n                'rgba(75, 192, 192, 1)',\r\n                'rgba(255, 99, 132, 1)'\r\n              ],\r\n              borderWidth: 1\r\n            }]\r\n          }\r\n        })\r\n      }\r\n\r\n      // Users Chart\r\n      const usersCtx = document.querySelector('#usersChart')\r\n      if (usersCtx) {\r\n        usersChart.value = new Chart(usersCtx, {\r\n          type: 'line',\r\n          data: {\r\n            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],\r\n            datasets: [{\r\n              label: 'New Users',\r\n              data: [65, 59, 80, 81, 56, 55],\r\n              fill: false,\r\n              borderColor: 'rgb(75, 192, 192)',\r\n              tension: 0.1\r\n            }]\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    // Lifecycle hooks\r\n    onMounted(() => {\r\n      console.log('AdminDashboard mounted - loading data...');\r\n      loadDashboardData();\r\n      // Initialize charts after a delay to ensure DOM is ready\r\n      setTimeout(() => {\r\n        initCharts();\r\n      }, 1000);\r\n    });\r\n\r\n    return {\r\n      stats,\r\n      users,\r\n      services,\r\n      currentTab,\r\n      tabs,\r\n      userSearch,\r\n      serviceSearch,\r\n      userTypeFilter,\r\n      serviceForm,\r\n      editingService,\r\n      selectedUser,\r\n      filteredUsers,\r\n      filteredServices,\r\n      pendingApprovals,\r\n      loading,\r\n      error,\r\n      isDeleting,\r\n      csvLoading,\r\n      csvMessage,\r\n      showNewServiceModal,\r\n      editService,\r\n      saveService,\r\n      approveUser,\r\n      toggleUserBlock,\r\n      viewUserDetails,\r\n      refreshUsers,\r\n      loadDashboardData,\r\n      downloadCSV\r\n    }\r\n  },\r\n  methods: {\r\n    async handleDeleteService(serviceId) {\r\n      if (!serviceId || typeof serviceId !== 'number') {\r\n        console.error('Invalid service ID:', serviceId);\r\n        return;\r\n      }\r\n\r\n      if (!confirm('Are you sure you want to delete this service?')) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        this.isDeleting = true;\r\n        // Fix the API reference to use the imported adminAPI\r\n        const result = await adminAPI.deleteService(serviceId);\r\n        \r\n        if (result.wasDeactivated) {\r\n          // Check if $toast exists before using it\r\n          if (this.$toast) {\r\n            this.$toast.info(result.message || 'Service was deactivated');\r\n          } else {\r\n            alert(result.message || 'Service was deactivated');\r\n          }\r\n          \r\n          // Update the service status in the list instead of removing it\r\n          const serviceIndex = this.services.findIndex(s => s.id === serviceId);\r\n          if (serviceIndex !== -1) {\r\n            this.services[serviceIndex].is_active = false;\r\n            this.services[serviceIndex].status = 'inactive';\r\n          }\r\n        } else {\r\n          // Remove service from list\r\n          this.services = this.services.filter(s => s.id !== serviceId);\r\n          \r\n          // Check if $toast exists before using it\r\n          if (this.$toast) {\r\n            this.$toast.success(result.message || 'Service deleted successfully');\r\n          } else {\r\n            alert(result.message || 'Service deleted successfully');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Delete failed:', error);\r\n        // Check if $toast exists before using it\r\n        if (this.$toast) {\r\n          this.$toast.error(error.message || 'Failed to delete service');\r\n        } else {\r\n          alert(error.message || 'Failed to delete service');\r\n        }\r\n      } finally {\r\n        this.isDeleting = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.admin-dashboard {\r\n  background-color: #f8f9fa;\r\n  min-height: 100vh;\r\n}\r\n\r\n.icon-shape {\r\n  width: 48px;\r\n  height: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.card {\r\n  border: none;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.nav-tabs .nav-link {\r\n  cursor: pointer;\r\n}\r\n\r\n.table th {\r\n  font-weight: 600;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.reviews-list {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.review-item {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #dee2e6;\r\n}\r\n\r\n.review-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.stars {\r\n  color: #ffc107;\r\n}\r\n\r\n.btn-group {\r\n  gap: 0.25rem;\r\n}\r\n\r\n.modal-body {\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.table-warning {\r\n  background-color: rgba(255, 193, 7, 0.1);\r\n}\r\n\r\n.alert-warning {\r\n  border-left: 4px solid #ffc107;\r\n}\r\n\r\n.btn-group {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.btn-danger:hover {\r\n  background-color: #c82333;\r\n}\r\n\r\n.badge {\r\n  padding: 0.5em 0.75em;\r\n  border-radius: 0.25rem;\r\n}\r\n\r\n.bg-success {\r\n  background-color: #28a745;\r\n}\r\n\r\n.bg-danger {\r\n  background-color: #dc3545;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}